<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>HTML5 Slides</title>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;500;700&display=swap" rel="stylesheet">

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; overflow: hidden; background: #111; color: #fff; font-family: 'Raleway', sans-serif; }

  .slides { width: 100%; height: 100%; position: relative; overflow: hidden; }
  .slide { width: 100%; height: 100%; position: absolute; top: 0; display: flex; flex-direction: column; justify-content: center; padding: 4rem; transition: transform 0.6s ease; }

  .content-box { max-width: 50%; z-index: 2; }
  .content-box h2 { font-size: 1rem; opacity: 0.6; text-align: left; }
  .content-box h1 { font-size: 2rem; margin-top: 0.5rem; text-align: left; }
  .content-box h3 { font-size: 1.2rem; opacity: 0.9; margin-top: 0.3rem; text-align: left; }
  .content-box p { font-size: 1rem; margin-top: 1rem; opacity: 0.85; line-height: 1.4; text-align: left; }

  .image-box { 
    position: absolute; 
    right: 0; 
    top: 0; 
    width: 55%; 
    height: 100%; 
    background-size: cover; /* Assure que l'image couvre toute la boîte */
    background-position: center; 
    opacity: 0.8; 
  }

  /* Bullet list slide */
  .bullet-list li { opacity: 0; transition: opacity 0.4s ease; font-size: 1.4rem; margin: 1rem 0; }

  /* Style du bouton Plein Écran */
  .fullscreen-button {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 100;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #fff;
    padding: 5px 12px;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: 500;
    opacity: 0.5;
    transition: opacity 0.3s ease, background 0.3s ease;
  }

  .fullscreen-button:hover {
    opacity: 1;
    background: rgba(255, 255, 255, 0.2);
  }
</style>
</head>

<body>
<div class="slides" id="slides">

  <section class="slide" style="background:#111;">
    <div class="content-box">
      <h2>Préhistoire et Anticipation</h2>
      <h1>La Préhistoire dessine-t-elle les limites 
       <br>
       du récit spéculatif ?</h1>
      <h3>Benjamin Efrati - Doctorant CRAL - EHESS/CNRS</h3>
      <p>Time World - 4.12.2025 - Besançon</p>
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/e/e0/Pelecypoda_-_Palaeontology_and_Geology_-_Geological_Survey_of_Queensland.jpg');"></span>
  </section>

   <section class="slide" style="background:#111;">
    <div class="content-box">
      <h2>Préhistoire et Anticipation</h2>
      <h1>La Préhistoire dessine-t-elle les limites du récit spéculatif ?</h1>
      <h3>Retour au XIXe siècle</h3>
      <p>Avec l'émergence de l'archéologie préhistorique, les "curiositiés antédilluviennes" nous ont donné accès à un imaginaire du temps profond. 
       <br>
       C'est cette nouvelle dimension de la pensée spéculative qui rendra possibie l'éclosion du récit de genre d'anticipation.
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/9/91/Megatherium.jpg');"></span>
  </section>
 
 <section class="slide" style="background:#111;">
    <div class="content-box">
      <h2>1.1</h2>
      <h1>Échos d'Horizon</h1>
      <h3>Fragments d’un futur discret</h3>
      <p>Dans un monde flottant entre certitude et mirage, les mots se tissent en réseaux fluides, révélant des perspectives inattendues.</p>
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/c/cb/Mammoth_Steppe_Diorama.jpg');"></span>
  </section>

  <section class="slide" style="background:#111;">
    <div class="content-box">
      <h2>1.2</h2>
      <h1>Clarté Silencieuse</h1>
      <h3>Les formes du visible</h3>
      <p>Les contours se dissipent tandis que la lumière révèle l’essence du mouvement, laissant aux ombres le soin de compléter le sens.</p>
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/e/e0/Pelecypoda_-_Palaeontology_and_Geology_-_Geological_Survey_of_Queensland.jpg');"></span>
  </section>

  <section class="slide" style="background:#111;">
    <div class="content-box">
      <h2>5.7</h2>
      <h1>Réseaux du Crépuscule</h1>
      <h3>Cartographie intérieure</h3>
      <p>À mesure que la frontière se dissout, les connexions se reforment, révélant des trajectoires que la logique seule ne pouvait tracer.</p>
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/9/91/Megatherium.jpg');"></span>
  </section>

    <section class="slide" id="bulletSlide" style="background:#111;">
    <div class="content-box">
      <h2>9.4</h2>
      <h1>Points Essentiels</h1>
      <ul class="bullet-list" id="bulletList"></ul>
      <p style="margin-top:1rem; opacity:0.6; font-size:0.9rem;">→ Ajouter un point : Flèche droite / ↓ &nbsp;&nbsp; ↑ Finaliser et créer une nouvelle diapo</p>
    </div>
  </section>

</div>

<button id="fullscreenToggle" class="fullscreen-button" title="Plein Écran (Touche F)">
  Plein Écran
</button>

<script>
let slides = Array.from(document.querySelectorAll('.slide'));
let index = 0;
const bulletList = document.getElementById('bulletList');
const randomBullets = [
  "Le réseau révèle l’invisible.",
  "Chaque transition expose un détail.",
  "La structure donne sens au mouvement.",
  "Les systèmes émergent du chaos.",
  "La perception façonne la réalité.",
  "Innovative synergy pathways",
  "Adaptive workflow iteration"
];
let bulletFrozen = false;

function layoutSlides() {
  slides.forEach((slide, i) => {
    slide.style.transform = `translateX(${(i - index) * 100}%)`;
  });
}
layoutSlides();

function gotoSlide(n) {
  if (n < 0) n = 0;
  if (n > slides.length - 1) n = slides.length - 1;
  index = n;
  layoutSlides();
}

function next() {
  if (index < slides.length - 1) {
    index++;
    layoutSlides();
    return;
  }
  // if on last slide (bullet slide) and not frozen => add bullet
  if (index === slides.length - 1 && !bulletFrozen) addBullet();
}

function previous() {
  if (index > 0) {
    index--;
    layoutSlides();
  }
}

function addBullet() {
  const text = randomBullets[Math.floor(Math.random() * randomBullets.length)];
  const li = document.createElement('li');
  li.textContent = text;
  bulletList.appendChild(li);
  // trigger fade-in
  requestAnimationFrame(() => { li.style.opacity = 1; });
}

function finalizeBulletsAndCreateSlide() {
  if (bulletFrozen) return;
  bulletFrozen = true; // prevent further bullets
  // dim list slightly to show it's frozen
  bulletList.style.opacity = 0.6;

  // create a new slide DOM element
  const newSection = document.createElement('section');
  newSection.className = 'slide';
  newSection.style.background = '#111';

  // generate simple incremental title based on count
  const num = slides.length + 1;
  const h2 = (num < 10) ? `0.${num}` : `${num}.0`;

  const titles = [
    'Nouvelle Perspective', 'Itinéraire Synthétique', 'Observation Libre', 'Cadre d’Idées'
  ];
  const subs = [
    'Exploration additionnelle', 'Nouvelle fenêtre', 'Approfondissement', 'Bilan rapide'
  ];
  const paras = [
    'Un aperçu généré automatiquement pour poursuivre la narration et garder le flux d’idées.',
    'Contenu provisoire créé après validation des points clés, modifiable à loisir.',
    'Slide générée: ajoutez images et texte pour compléter la présentation.'
  ];

  newSection.innerHTML = `
    <div class="content-box">
      <h2>${h2}</h2>
      <h1>${titles[Math.floor(Math.random()*titles.length)]}</h1>
      <h3>${subs[Math.floor(Math.random()*subs.length)]}</h3>
      <p>${paras[Math.floor(Math.random()*paras.length)]}</p>
    </div>
        <span class="image-box" style="background-image:url('https://upload.wikimedia.org/wikipedia/commons/0/0d/Orthodox-Apocalypse-Fresco.jpg?v=${Date.now()}');"></span>
  `;

  document.getElementById('slides').appendChild(newSection);

  // refresh slides array and go to the new slide
  slides = Array.from(document.querySelectorAll('.slide'));
  index = slides.length - 1;
  layoutSlides();
}

/**
 * Fonction pour basculer en mode plein écran ou en sortir.
 * Met également à jour le texte du bouton.
 */
function toggleFullscreen() {
  const button = document.getElementById('fullscreenToggle');
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
    button.textContent = 'Quitter Écran';
  } else {
    document.exitFullscreen();
    button.textContent = 'Plein Écran';
  }
}

// Assigner la fonction au clic du bouton
document.getElementById('fullscreenToggle').addEventListener('click', toggleFullscreen);

// Mettre à jour le texte du bouton lorsque le mode plein écran change (ex: via touche Échap)
document.addEventListener('fullscreenchange', () => {
    const button = document.getElementById('fullscreenToggle');
    if (document.fullscreenElement) {
        button.textContent = 'Quitter Écran';
    } else {
        button.textContent = 'Plein Écran';
    }
});

window.addEventListener('keydown', e => {
  // Fullscreen toggle (F)
  if (e.key.toLowerCase() === 'f') {
    toggleFullscreen();
    return;
  }

  // If on bullet slide
  if (index === slides.length - 1) {
    if (e.key === 'ArrowRight' || e.key === 'PageDown' || e.key === 'ArrowDown') {
      // add bullet
      addBullet();
      return;
    }
    if (e.key === 'ArrowUp') {
      // finalize and create new slide
      finalizeBulletsAndCreateSlide();
      return;
    }
  }

  // normal navigation
  if (e.key === 'ArrowRight' || e.key === 'PageDown') next();
  if (e.key === 'ArrowLeft' || e.key === 'PageUp') previous();
});
</script>
</body>
</html>
